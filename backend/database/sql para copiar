CREATE DATABASE viveoutdoors;

\c viveoutdoors;

CREATE TABLE usuarios (id_usuario INT PRIMARY KEY AUTO_INCREMENT, nombre VARCHAR(50) NOT NULL, apellido VARCHAR(50) NOT NULL, email VARCHAR(100) UNIQUE NOT NULL, telefono VARCHAR(15) UNIQUE NOT NULL, password VARCHAR(15) NOT NULL, rol ENUM('Admin', 'Cliente') DEFAULT 'Cliente');

CREATE TABLE direcciones (id_direccion INT PRIMARY KEY AUTO_INCREMENT, id_usuario INT NOT NULL, direccion VARCHAR(255) NOT NULL, ciudad VARCHAR(100) NOT NULL, region VARCHAR(100) NOT NULL, FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario));

CREATE TABLE categorias (id_categoria INT PRIMARY KEY AUTO_INCREMENT, nombre VARCHAR(100) NOT NULL );

CREATE TABLE productos ( id_producto INT PRIMARY KEY AUTO_INCREMENT, nombre VARCHAR(100) NOT NULL, descripción TEXT, stock INT NOT NULL, precio INT NOT NULL);

CREATE TABLE productos_categorias ( id_producto INT NOT NULL, id_categoria INT NOT NULL, PRIMARY KEY (id_producto, id_categoria), FOREIGN KEY (id_producto) REFERENCES productos(id_producto), FOREIGN KEY (id_categoria) REFERENCES categorias(id_categoria));

CREATE TABLE productos_sale (id_producto INT NOT NULL, descuento INT NOT NULL, estado ENUM('activo', 'inactivo') NOT NULL DEFAULT 'inactivo', PRIMARY KEY (id_producto), FOREIGN KEY (id_producto) REFERENCES productos(id_producto));

CREATE TABLE imagenes_productos (id_imagen INT PRIMARY KEY AUTO_INCREMENT, id_producto INT NOT NULL, url VARCHAR(255) NOT NULL, texto_alternativo VARCHAR(255) NOT NULL, FOREIGN KEY (id_producto) REFERENCES productos(id_producto));

CREATE TABLE pedidos (id_pedido INT PRIMARY KEY AUTO_INCREMENT, id_usuario INT NOT NULL, fecha_pedido DATETIME NOT NULL, estado ENUM('pendiente', 'enviado', 'completado', 'cancelado') DEFAULT 'pendiente', total INT NOT NULL, FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario) );

CREATE TABLE detallesPedido ( id_detalle INT PRIMARY KEY AUTO_INCREMENT, id_pedido INT NOT NULL, id_producto INT NOT NULL, cantidad INT NOT NULL, precio INT NOT NULL, FOREIGN KEY (id_pedido) REFERENCES pedidos(id_pedido), FOREIGN KEY (id_producto) REFERENCES productos(id_producto) );

CREATE TABLE carrito (id_carrito INT PRIMARY KEY AUTO_INCREMENT, id_usuario INT NOT NULL, fecha_creacion DATETIME NOT NULL, FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario));

CREATE TABLE detallesCarrito (id_detalle_carrito INT PRIMARY KEY AUTO_INCREMENT, id_carrito INT NOT NULL, id_producto INT NOT NULL, cantidad INT NOT NULL, precio INT NOT NULL, FOREIGN KEY (id_carrito) REFERENCES carrito(id_carrito), FOREIGN KEY (id_producto) REFERENCES productos(id_producto));

CREATE TABLE publicaciones (id_publicacion INT PRIMARY KEY AUTO_INCREMENT, id_producto INT NOT NULL, id_usuario INT NOT NULL, estado ENUM('Activo', 'Inactivo') NOT NULL, fecha_creacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, fecha_actualizacion DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, FOREIGN KEY (id_producto) REFERENCES productos(id_producto), FOREIGN KEY (id_usuario) REFERENCES usuarios(id_usuario) );


INSERT INTO usuarios (id_usuario, nombre, apellido, email, telefono, password, rol) VALUES (DEFAULT, 'juan', 'perez', 'admin1@example.com', '1234567890', '12345', 'Admin');
INSERT INTO usuarios (id_usuario, nombre, apellido, email, telefono, password, rol) VALUES (DEFAULT, 'ana', 'gomez', 'admin2@example.com', '0987654321', '12345', 'Admin'),
INSERT INTO usuarios (id_usuario, nombre, apellido, email, telefono, password, rol) VALUES (DEFAULT, 'maria', 'lopez', 'cliente1@example.com', '1122334455', '1111', 'Cliente');

INSERT INTO direcciones (id_direccion, id_usuario, direccion, ciudad, region) VALUES (DEFAULT, 1, 'Calle Admin1', 'Santiago', 'Metropolitana');


INSERT INTO direcciones (id_direccion, id_usuario, direccion, ciudad, region) VALUES (DEFAULT, 2, 'Calle Admin2', 'Santiago', 'Metropolitana');


INSERT INTO direcciones (id_direccion, id_usuario, direccion, ciudad, region) VALUES (DEFAULT, 3, 'Calle 123', 'Santiago', 'Metropolitana'), (DEFAULT, 3, 'Avenida 456', 'Casablanca', 'Valparaíso');


INSERT INTO categorias (id_categoria, nombre, sale) VALUES (DEFAULT, 'Carpas'), (DEFAULT, 'Mochilas'), (DEFAULT, 'Sacos & Colchonetas'), (DEFAULT, 'Accesorios'); 


INSERT INTO productos (id_producto, nombre, descripción, stock, precio) VALUES (DEFAULT, 'Carpa Everest', 'Carpa de alta montaña', 10, 200000);
INSERT INTO productos (id_producto, nombre, descripción, stock, precio) VALUES (DEFAULT, 'Carpa Igloo', 'Carpa para 4 personas', 15, 120000);


INSERT INTO productos (id_producto, nombre, descripción, stock, precio) VALUES (DEFAULT, 'Mochila Montañista', 'Mochila de 70 litros', 20, 40000);
INSERT INTO productos (id_producto, nombre, descripción, stock, precio) VALUES (DEFAULT, 'Mochila Trekking', 'Mochila ligera de 30 litros', 30, 30000);


INSERT INTO productos (id_producto, nombre, descripción, stock, precio) VALUES (DEFAULT, 'Saco de Dormir Invierno', 'Saco térmico para bajas temperaturas', 25, 60000);
INSERT INTO productos (id_producto, nombre, descripción, stock, precio) VALUES (DEFAULT, 'Colchoneta Autoinflable', 'Colchoneta para camping', 20, 30000);


INSERT INTO productos (id_producto, nombre, descripción, stock, precio) VALUES (DEFAULT, 'Linterna LED', 'Linterna resistente al agua', 50, 15000);
INSERT INTO productos (id_producto, nombre, descripción, stock, precio) VALUES (DEFAULT, 'Filtro de Agua Portátil', 'Filtro compacto para purificar agua', 40, 25000);


INSERT INTO productos_categorias (id_producto, id_categoria) VALUES (1, 1);
INSERT INTO productos_categorias (id_producto, id_categoria) VALUES (2, 1);


INSERT INTO productos_categorias (id_producto, id_categoria) VALUES (3, 2);
INSERT INTO productos_categorias (id_producto, id_categoria) VALUES (4, 2);


INSERT INTO productos_categorias (id_producto, id_categoria) VALUES (5, 3);
INSERT INTO productos_categorias (id_producto, id_categoria) VALUES (6, 3);


INSERT INTO productos_categorias (id_producto, id_categoria) VALUES (7, 4);
INSERT INTO productos_categorias (id_producto, id_categoria) VALUES (8, 4);


INSERT INTO productos_sale (id_producto, descuento, estado) VALUES (1, 20, 'Activo'); 
INSERT INTO productos_sale (id_producto, descuento, estado) VALUES (2, 0, 'Inactivo'); 

INSERT INTO productos_sale (id_producto, descuento, estado) VALUES (3, 0, 'Inactivo'); 
INSERT INTO productos_sale (id_producto, descuento, estado) VALUES (4, 5, 'Activo');


INSERT INTO productos_sale (id_producto, descuento, estado) VALUES (5, 0, 'Inactivo'); 
INSERT INTO productos_sale (id_producto, descuento, estado) VALUES (6, 0, 'Inactivo'); 

INSERT INTO productos_sale (id_producto, descuento, estado) VALUES (7, 0, 'Inactivo'); 
INSERT INTO productos_sale (id_producto, descuento, estado) VALUES (8, 15, 'Activo'); 


INSERT INTO imagenes_productos (id_imagen, id_producto, url, texto_alternativo) VALUES (DEFAULT, 1, 'https://m.media-amazon.com/images/I/61zzlUv-4eL._AC_SL1500_.jpg', 'Imagen de Carpa Everest - Cerrada'), (DEFAULT, 1, 'https://m.media-amazon.com/images/I/610X8VJrcHL._AC_SX679_.jpg', 'Imagen de Carpa Everest - Abierta'), (DEFAULT, 1, 'https://m.media-amazon.com/images/I/61P9b+4pBPL._AC_SL1500_.jpg', 'Imagen de Carpa Everest - Detalle');

INSERT INTO imagenes_productos (id_imagen, id_producto, url, texto_alternativo) VALUES (DEFAULT, 2, 'https://m.media-amazon.com/images/I/61+B+9TQYhL._AC_SX679_.jpg', 'Imagen de Carpa Igloo - Dos modos'), (DEFAULT, 2, 'https://m.media-amazon.com/images/I/81WZ7dYqGuL._AC_SL1500_.jpg', 'Imagen de Carpa Igloo - Doble Capa'), (DEFAULT, 2, 'https://m.media-amazon.com/images/I/81ATXZXt57L._AC_SL1500_.jpg', 'Imagen de Carpa Igloo - Cerrada');


INSERT INTO imagenes_productos (id_imagen, id_producto, url, texto_alternativo) VALUES (DEFAULT, 3, 'https://m.media-amazon.com/images/I/61lYcYQnRBL._AC_SL1000_.jpg', 'Imagen de Mochila Montañista - Frente'), (DEFAULT, 3, 'https://m.media-amazon.com/images/I/71-dfOPWIXL._AC_SL1000_.jpg', 'Imagen de Mochila Montañista - Atrás'), (DEFAULT, 3, 'https://m.media-amazon.com/images/I/71bVBa+a5cL._AC_SL1000_.jpg', 'Imagen de Mochila Montañista - Características');

INSERT INTO imagenes_productos (id_imagen, id_producto, url, texto_alternativo) VALUES (DEFAULT, 4, 'https://m.media-amazon.com/images/I/81siwI2UxEL._AC_SX679_.jpg', 'Imagen de Mochila Trekking - Frente'), (DEFAULT, 4, 'https://m.media-amazon.com/images/I/816L9Vop0BL._AC_SL1500_.jpg', 'Imagen de Mochila Trekking - Atrás'), (DEFAULT, 4, 'https://m.media-amazon.com/images/I/71QUucsiLdL._AC_SL1500_.jpg', 'Imagen de Mochila Trekking - Características');


INSERT INTO imagenes_productos (id_imagen, id_producto, url, texto_alternativo) VALUES (DEFAULT, 5, 'https://m.media-amazon.com/images/I/51QlEPuyJuL._AC_SL1100_.jpg', 'Imagen de Saco de Dormir'), (DEFAULT, 5, 'https://m.media-amazon.com/images/I/61c+KuSoyjL._AC_SL1000_.jpg', 'Imagen de Saco de Dormir - Abierto');

INSERT INTO imagenes_productos (id_imagen, id_producto, url, texto_alternativo) VALUES (DEFAULT, 6, 'https://m.media-amazon.com/images/I/710FSXg104L._AC_SL1500_.jpg', 'Imagen de Colchoneta'), (DEFAULT, 6, 'https://m.media-amazon.com/images/I/71-WRK2UgUL._AC_SL1500_.jpg', 'Imagen de Colchoneta - Características');



INSERT INTO imagenes_productos (id_imagen, id_producto, url, texto_alternativo) VALUES (DEFAULT, 7, 'https://m.media-amazon.com/images/I/81HsUrL1r3L._AC_SL1500_.jpg', 'Imagen de Linterna LED'), (DEFAULT, 7, 'https://m.media-amazon.com/images/I/61+oUcG7nKL._AC_SL1000_.jpg', 'Imagen de Linterna LED - Características'), (DEFAULT, 7, 'https://m.media-amazon.com/images/I/911vrRoQxZL._AC_SL1500_.jpg ', 'Imagen de Linterna LED - Características');

INSERT INTO imagenes_productos (id_imagen, id_producto, url, texto_alternativo) VALUES (DEFAULT, 8, 'https://m.media-amazon.com/images/I/61LxBlQKmkL._SL1500_.jpg', 'Imagen de Filtro de Agua Portátil'), (DEFAULT, 8, 'https://m.media-amazon.com/images/I/610SxQjvBvL._SL1500_.jpg', 'Imagen de Filtro de Agua Portátil'), (DEFAULT, 8, 'https://m.media-amazon.com/images/I/81eKsz+YVyL._SL1500_.jpg', 'Imagen de Filtro de Agua Portátil');


INSERT INTO pedidos (id_pedido, id_usuario, fecha_pedido, estado, total) VALUES (DEFAULT, 3, '2024-11-10 10:30:00', 'pendiente', 240000);

INSERT INTO pedidos (id_pedido, id_usuario, fecha_pedido, estado, total) VALUES (DEFAULT, 3, '2024-11-11 15:45:00', 'pendiente', 135000);


INSERT INTO detallesPedido (id_detalle, id_pedido, id_producto, cantidad, precio) VALUES (DEFAULT, 1, 1, 1, 200000), (DEFAULT, 1, 3, 1, 40000);  


INSERT INTO detallesPedido (id_detalle, id_pedido, id_producto, cantidad, precio) VALUES (DEFAULT, 1, 2, 1, 120000), (DEFAULT, 1, 7, 1, 15000);  

INSERT INTO carrito (id_carrito, id_usuario, fecha_creacion) VALUES (DEFAULT, 3, '2024-11-10 09:00:00');


INSERT INTO detallesCarrito (id_detalle_carrito, id_carrito, id_producto, cantidad, precio) VALUES (DEFAULT, 1, 1, 1, 200000), (DEFAULT, 1, 3, 1, 40000); 


INSERT INTO publicaciones (id_publicacion, id_producto, id_usuario, estado, fecha_creacion, fecha_actualizacion) VALUES (DEFAULT, 1, 1, 'Activo', '2024-11-10 10:00:00', '2024-11-10 10:00:00'), (DEFAULT, 2, 1, 'Activo', '2024-11-10 11:00:00', '2024-11-10 11:00:00'); 

INSERT INTO publicaciones (id_publicacion, id_producto, id_usuario, estado, fecha_creacion, fecha_actualizacion) VALUES(DEFAULT, 3, 2, 'Activo', '2024-11-11 10:00:00', '2024-11-11 10:00:00'), (DEFAULT, 4, 2, 'Activo', '2024-11-11 11:00:00', '2024-11-11 11:00:00'); 

INSERT INTO publicaciones (id_publicacion, id_producto, id_usuario, estado, fecha_creacion, fecha_actualizacion) VALUES (DEFAULT, 5, 1, 'Activo', '2024-11-12 10:00:00', '2024-11-12 10:00:00'), (DEFAULT, 6, 1, 'Activo', '2024-11-12 11:00:00', '2024-11-12 11:00:00'); 

INSERT INTO publicaciones (id_publicacion, id_producto, id_usuario, estado, fecha_creacion, fecha_actualizacion) VALUES (DEFAULT, 7, 2, 'Activo', '2024-11-13 10:00:00', '2024-11-13 10:00:00'), (DEFAULT, 8, 2, 'Activo', '2024-11-13 11:00:00', '2024-11-13 11:00:00'); 
